@page "/"
@*@using Microsoft.Extensions.Logging
    @inject ILogger<Index> log
    @inject ILoggedInUserModel loggedInUser*@
@using TulipBlazorUI.Pages.ProductsPages
@inject IProductEndPoint _productEndPoint

<h1>Hello, world!</h1>
<AuthorizeView>
    <Authorized>
        <p>Welcome, @context.User.Identity.Name</p>
    </Authorized>
    @*<NotAuthorized>
        <p>You are signed out!!!</p>
    </NotAuthorized>*@
</AuthorizeView>
<div class="row">
    @foreach (var product in Products)
    {
        <ProductComponent Product="@product"/>
    }
</div>

@*<div class="row">
        <div class="col-md-12">
            <a href="images/logo.jpg" target="_blank">
                <img src="images/logo.jpg" />
            </a>

        </div>
    </div>*@
@code{
    public List<ProductModel> Products { get; set; } = new List<ProductModel>();

    protected override async Task OnInitializedAsync()
    {
        //var products = await _productEndPoint.GetAll();
        //Products = new List<ProductModel>(products);
        Products = await _productEndPoint.GetAll();
    }
}